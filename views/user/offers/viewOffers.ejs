<%- include('../../partials/header.ejs') %>
<body class="w-screen h-screen flex flex-col bg-neutral-900 font-sans pt-16">
	<% if(offers.length > 0 && offers[0].cheese.active) { %>
	<main class="w-screen overflow-auto bg-neutral-900 text-white mb-10">
		<div class="flex flex-col items-center justify-center">
			<h2 class="text-amber-100 text-3xl pt-4 text-left">Offers recieved for: <%= offers[0].cheese.title %></h2>

			<div class="p-6 flex flex-row items-center justify-center w-1/2">
				<table
					class="bg-neutral-800 w-full text-white rounded-md h-10 pl-2 border-2 border-neutral-950 table-fixed"
				>
					<thead class="">
						<tr>
							<th>Buyer</th>
							<th>Amount</th>
							<th>Action</th>
						</tr>
					</thead>

					<tbody class="">
						<% offers.forEach(offer => { %>
						<tr class="divide-y">
							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<h1 class="text-2xl"><%= offer.user.firstName %> <%= offer.user.lastName %></h1>
								</div>
							</td>

							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<h1 class="text-2xl">$<%= offer.amount %></h1>
								</div>
							</td>
							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<form
										action="/listing/item/<%= offer.cheese.id %>/offers/<%= offer.id %>/accept"
										method="POST"
										class="inline-block w-24"
									>
										<input type="hidden" name="buyer" id="buyer" value="<%= offer %>" />
										<button
											type="submit"
											class="text-white bg-amber-700 hover:bg-amber-800 focus:outline-none focus:ring-4 focus:ring-amber-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-amber-600 dark:hover:bg-amber-700 dark:focus:ring-amber-800 w-full flex flex-row items-center justify-center gap-1"
										>
											Accept
										</button>
									</form>
								</div>
							</td>
						</tr>
						<% }) %>
					</tbody>
				</table>
			</div>
		</div>
	</main>
	<% } else if (offers[0].cheese.active == false) { %>
	<main class="w-screen overflow-auto bg-neutral-900 text-white mb-10">
		<div class="flex flex-col items-center justify-center">
			<h2 class="text-amber-100 text-3xl pt-4 text-left">Offers recieved for: <%= offers[0].cheese.title %></h2>

			<div class="p-6 flex flex-row items-center justify-center w-1/2">
				<table
					class="bg-neutral-800 w-full text-white rounded-md h-10 pl-2 border-2 border-neutral-950 table-fixed"
				>
					<thead class="">
						<tr>
							<th>Buyer</th>
							<th>Amount</th>
							<th>Action</th>
						</tr>
					</thead>

					<tbody class="">
						<% offers.forEach(offer => { %>
						<tr class="divide-y">
							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<h1 class="text-2xl"><%= offer.user.firstName %> <%= offer.user.lastName %></h1>
								</div>
							</td>

							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<h1 class="text-2xl">$<%= offer.amount %></h1>
								</div>
							</td>
							<td>
								<div class="flex flex-row items-center justify-center w-full">
									<h1 class="text-2xl"><%= offer.status %></h1>
								</div>
							</td>
						</tr>
						<% }) %>
					</tbody>
				</table>
			</div>
		</div>
	</main>
</body>
<% } %> <%- include('../../partials/footer.ejs') %>
